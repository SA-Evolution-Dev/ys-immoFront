<main class="main" id="top">
    <div class="row vh-100 g-0">
        <div class="col-lg-6 position-relative d-none d-lg-block">
            <div class="bg-holder" style="background-image:url(assets/img/bg/search/3.jpg);">
            </div>
        </div>

        <div class="col-lg-6">
            <div class="row flex-center h-100 g-0 px-4 px-sm-0">
                @if (isRegisterAccount()) {

                    <div class="col col-sm-6 col-lg-7 col-xl-8">
                        <div class="text-center mb-4">
                            <div class="avatar avatar-5xl">
                                <div class="avatar-name rounded-circle bg-success-subtle">
                                    <span class="fs-5 text-success">
                                        <i class="fas fa-envelope-circle-check fs-1"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Title -->
                        <div class="text-center mb-4">
                            <h3 class="text-body-highlight">Inscription réussie !</h3>
                            <p class="text-body-tertiary">Votre compte a été créé avec succès</p>
                        </div>
                    
                        <!-- Alert Message -->
                        <div class="alert alert-phoenix-info d-flex align-items-center mb-4" role="alert">
                            <span class="fas fa-info-circle text-info fs-8 me-3"></span>
                            <div class="flex-1">
                                <p class="mb-0 fs-9 fw-semi-bold">
                                    Un email de confirmation a été envoyé à votre adresse
                                </p>
                            </div>
                        </div>
                    
                        <!-- Instructions -->
                        <div class="card bg-body-highlight border-0 mb-4">
                            <div class="card-body p-3">
                                <h5 class="fs-9 fw-semi-bold mb-3">
                                    <i class="fas fa-list-check text-primary me-2"></i>
                                    Étapes suivantes :
                                </h5>
                                <ol class="mb-0 ps-3 fs-9">
                                    <li class="mb-2">Consultez votre boîte de réception</li>
                                    <li class="mb-2">Ouvrez l'email de confirmation</li>
                                    <li class="mb-2">Cliquez sur le lien d'activation</li>
                                    <li>Connectez-vous à votre compte</li>
                                </ol>
                            </div>
                        </div>
                    
                        <!-- Warning Box -->
                        <div class="alert alert-phoenix-warning border-warning border mb-4" role="alert">
                            <div class="d-flex align-items-start">
                                <span class="fas fa-exclamation-triangle text-warning me-2 mt-1"></span>
                                <div class="flex-1">
                                    <p class="mb-1 fw-semi-bold fs-10">Vous n'avez pas reçu l'email ?</p>
                                    <p class="mb-0 fs-10 text-800">
                                        Vérifiez votre dossier spam ou cliquez sur le bouton ci-dessous pour renvoyer le lien.
                                    </p>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Actions -->
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary w-100 mb-2">
                                <i class="fas fa-paper-plane me-2"></i>
                                Renvoyer l'email d'activation
                            </button>
                    
                            <button routerLink="/authentification" class="btn btn-phoenix-secondary w-100 mt-2">← Retour à la
                                connexion</button>
                        </div>
                    </div>

                } @else { 

                    <div class="col col-sm-6 col-lg-7 col-xl-8">
                        <a class="d-flex flex-center text-decoration-none mb-4">
                            <div class="d-flex align-items-center fw-bolder fs-3 d-inline-block">
                                <img src="../../../assets/img/icons/logo.png" alt="phoenix" width="58" />
                            </div>
                        </a>
    
                        <div class="text-center mb-5">
                            <h3 class="text-body-highlight"> Inscrivez-vous gratuitement !</h3>
                            <p class="text-body-tertiary">Rejoignez notre plateforme et commencez à publier vos annonces immobilières gratuitement</p>
                        </div>
    
                        <!-- <button class="btn btn-phoenix-secondary w-100 mb-2">
                            <span class="fab fa-google text-danger me-2 fs-9"></span>
                            S’inscrire avec Google
                        </button>
    
                        <div class="position-relative mt-2">
                            <hr class="bg-body-secondary" />
                            <div class="divider-content-center">ou utiliser votre email</div>
                        </div> -->
    
                        <form class="mt-3" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                            <div class="row mb-1">
                                <label class="form-label mb-2">Vous vous inscrivez en tant que :</label>
                                <div class="col-sm-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" formControlName="role" value="particulier" id="radioParticulier">
                                        <label for="radioParticulier" class="form-check-label">Un Particulier</label>
                                    </div>
                                </div>
    
                                <div class="col-sm-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" formControlName="role" value="entreprise" id="radioEntreprise">
                                        <label for="radioEntreprise" class="form-check-label">Une Entreprise</label>
                                    </div>
                                </div>
                                @if (f['role'].invalid && (f['role'].dirty || f['role'].touched)) {
                                    <span class="error-message">Veuillez sélectionner une option.</span>
                                }
                            </div>
    
                            @if (registerForm.get('role')?.value === 'client') {
                                <div class="mb-1 text-start">
                                    <label class="form-label" for="name">Nom de l'entreprise</label>
                                    <input class="form-control" id="corporateName" type="text" formControlName="corporateName"  
                                        [class.error]="f['corporateName'].invalid && (f['corporateName'].dirty || f['corporateName'].touched)" />
                                        @if (f['corporateName'].invalid && (f['corporateName'].dirty || f['corporateName'].touched)) {
                                            @if (f['corporateName'].errors?.['required']) {
                                                <span class="error-message">Le nom de l"entreprise est requis</span>
                                            }
                                        }
                                </div>
    
                                <div class="mb-1 text-start">
                                    <label class="form-label" for="name">Charger le logo de l'entreprise</label>
                                    <input class="form-control" id="corporateLogo" type="file"   accept="image/*" (change)="onLogoChange($event)" />
                                </div>
                            }
    
                            <div class="mb-1 text-start">
                                <label class="form-label" for="name">Nom et prenom</label>
                                <input class="form-control" id="name" type="text" formControlName="name"  
                                    [class.error]="f['name'].invalid && (f['name'].dirty || f['name'].touched)" />
                                    @if (f['name'].invalid && (f['name'].dirty || f['name'].touched)) {
                                        @if (f['name'].errors?.['required']) {
                                            <span class="error-message">Le nom est requis</span>
                                        }
                                        @if (f['name'].errors?.['minlength']) {
                                            <span class="error-message">Le nom doit contenir au moins 2 caractères</span>
                                        }
                                    }
                            </div>
    
                            <div class="mb-1 text-start">
                                <label class="form-label" for="email">Adresse email</label>
                                <input class="form-control" id="email" type="email" formControlName="email" 
                                    [class.error]="f['email'].invalid && (f['email'].dirty || f['email'].touched)" />
                                    @if (f['email'].invalid && (f['email'].dirty || f['email'].touched)) {
                                        @if (f['email'].errors?.['required']) {
                                            <span class="error-message">L'email est requis</span>
                                        }
                                        @if (f['email'].errors?.['email']) {
                                            <span class="error-message">Email invalide</span>
                                        }
                                    }
                            </div>
    
                            <div class="row mb-1">
                                <div class="col-sm-6">
                                    <label class="form-label" for="password">Mot de passe</label>
                                    <div class="position-relative" data-password="data-password">
                                        <input class="form-control form-icon-input pe-6" id="password" type="password" formControlName="password"
                                            [class.error]="f['password'].invalid && (f['password'].dirty || f['password'].touched)" />
                                            @if (f['password'].invalid && (f['password'].dirty || f['password'].touched)) {
                                                @if (f['password'].errors?.['required']) {
                                                    <span class="error-message">Le mot de passe est requis</span>
                                                }
                                                @if (f['password'].errors?.['minlength']) {
                                                    <span class="error-message">Le mot de passe doit contenir au moins 8 caractères</span> <br>
                                                }
                                                @if (f['password'].errors?.['passwordStrength']) {
                                                    <span class="error-message">{{ f['password'].errors?.['passwordStrength'].message }}</span>
                                                }
                                            }
                                    </div>
                                </div>
    
                                <div class="col-sm-6">
                                    <label class="form-label" for="confirmPassword">Repeter le mot de passe</label>
                                    <div class="position-relative" data-password="data-password">
                                        <input class="form-control form-icon-input pe-6" id="confirmPassword" type="password" formControlName="confirmPassword"
                                            [class.error]="(f['confirmPassword'].invalid || registerForm.errors?.['passwordMismatch']) && (f['confirmPassword'].dirty || f['confirmPassword'].touched)" />
                                            @if ((f['confirmPassword'].invalid || registerForm.errors?.['passwordMismatch']) && (f['confirmPassword'].dirty || f['confirmPassword'].touched)) {
                                                @if (f['confirmPassword'].errors?.['required']) {
                                                    <span class="error-message">La confirmation du mot de passe est requise</span>
                                                }
                                                @if (f['confirmPassword'].errors?.['minlength']) {
                                                    <span class="error-message">La confirmation doit contenir au moins 8 caractères</span>
                                                }
                                                @if (registerForm.errors?.['passwordMismatch'] && !f['confirmPassword'].errors?.['required']) {
                                                    <span class="error-message">Les mots de passe ne correspondent pas</span>
                                                }
                                            }
                                    </div>
                                </div>
                            </div>
    
                            <div class="form-check my-2">
                                <input class="form-check-input" id="termsService" type="checkbox" formControlName="acceptTerms" 
                                    [class.error]="f['acceptTerms'].invalid && (f['acceptTerms'].dirty || f['acceptTerms'].touched)" />
                                <label class="form-label fs-9 text-transform-none" for="termsService">
                                    J’accepte les <a href="#!">conditions</a> et la <a href="#!">politique de confidentialité</a>.
                                    @if (f['acceptTerms'].invalid && (f['acceptTerms'].dirty || f['acceptTerms'].touched)) {
                                        <br> <span class="error-message">Vous devez accepter les conditions pour continuer</span>
                                    }
                                </label>
                            </div>

                            @if (errorMessage()) {
                                <!-- Alert Message -->
                                <div class="alert alert-phoenix-danger d-flex align-items-start mb-4" role="alert">
                                    <span class="fas fa-circle-exclamation text-danger fs-8 me-3 mt-1"></span>
                                    <div class="flex-1">
                                        <h5 class="mb-1 fs-9 fw-bold text-danger">Erreur survenue</h5>
                                        <p class="mb-0 fs-10">
                                            Le réseau est indisponible, Veuillez réessayer ultérieurement.
                                        </p>
                                    </div>
                                </div>
                            }

                            <!-- <div class="alert success">Opération réussie ✔️</div>
                            <div class="alert danger">Erreur : quelque chose s'est mal passé ❌</div>
                            <div class="alert warning">Attention : vérifiez vos informations ⚠️</div>
                            <div class="alert info">Information : mise à jour disponible ℹ️</div> -->
                            
                            <button  type="submit" class="btn btn-primary w-100 mb-2">Créer mon compte</button>
                            <button routerLink="/home" class="btn btn-warning w-100 mt-2">← Retour à l'accueil</button>
    
                            <div class="text-center">
                                <a routerLink="/authentification" class="fs-9 fw-bold" href="">
                                    J’ai déjà un compte
                                </a>
                            </div>
                        </form>
                    </div>

                }
            </div>
        </div>
    </div>
</main>
