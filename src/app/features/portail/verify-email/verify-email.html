<!-- src/app/pages/verify-email/verify-email.component.html -->
<main class="main" id="top">
    <div class="container">
        <div class="row flex-center min-vh-100 py-5">
            <div class="col-sm-10 col-md-8 col-lg-5 col-xl-5 col-xxl-3">

                <!-- Logo -->
                <!-- <a class="d-flex flex-center text-decoration-none mb-4" [routerLink]="['/']">
                    <div class="d-flex align-items-center fw-bolder fs-3 d-inline-block">
                        <img src="assets/img/icons/logo.png" alt="YS Immo" width="58" />
                    </div>
                </a> -->

                <!-- STATUS: LOADING -->
                <div *ngIf="status() === 'loading'" class="text-center mb-6">
                    <div class="mb-4">
                        <div class="spinner-border text-primary" role="status" style="width: 4rem; height: 4rem;">
                            <span class="visually-hidden">Chargement...</span>
                        </div>
                    </div>
                    <h4 class="text-body-highlight">Vérification en cours...</h4>
                    <p class="text-body-tertiary">{{ message() }}</p>
                </div>

                <!-- STATUS: SUCCESS -->
                <div *ngIf="status() === 'success'" class="text-center mb-6">
                    <div class="mb-4">
                        <span class="fa-solid fa-circle-check text-success" style="font-size: 5rem;"></span>
                    </div>
                    <h4 class="text-body-highlight">Compte activé avec succès !</h4>
                    <p class="text-body-tertiary mb-3">{{ message() }}</p>

                    <div class="alert alert-success d-flex align-items-center mb-4" role="alert">
                        <span class="fa-solid fa-info-circle fs-5 me-3"></span>
                        <p class="mb-0 flex-1 text-start">
                            Vous allez être redirigé vers la page de connexion dans quelques secondes...
                        </p>
                    </div>

                    <div class="d-grid gap-3 mt-4">
                        <button class="btn btn-primary w-100" type="button" (click)="goToLogin()">
                            <span class="fa-solid fa-sign-in-alt me-2"></span>Se connecter maintenant
                        </button>
                        <button class="btn btn-outline-primary w-100" type="button" (click)="goToHome()">
                            <span class="fa-solid fa-home me-2"></span>Retour à l'accueil
                        </button>
                    </div>
                </div>

                <!-- STATUS: EXPIRED -->
                <div *ngIf="status() === 'expired'" class="text-center mb-6">
                    <div class="mb-4">
                        <span class="fa-solid fa-clock text-warning" style="font-size: 5rem;"></span>
                    </div>
                    <h4 class="text-body-highlight">Lien d'activation expiré</h4>
                    <p class="text-body-tertiary">{{ message() }}</p>

                    <div class="alert alert-warning d-flex align-items-center mb-4" role="alert">
                        <span class="fa-solid fa-exclamation-triangle fs-5 me-3"></span>
                        <p class="mb-0 flex-1 text-start">
                            Le lien d'activation a expiré après 24 heures. Demandez un nouveau lien ci-dessous.
                        </p>
                    </div>

                    <form class="mt-4" (ngSubmit)="resendActivationEmail()">
                        <div class="mb-3 text-start">
                            <label class="form-label" for="resend-email">Adresse email</label>
                            <div class="d-flex align-items-center border border-translucent rounded-3 px-3">
                                <span class="fa-solid fa-envelope text-body-tertiary me-2"></span>
                                <input class="form-control outline-none border-0 flex-1 fs-9 px-2" id="resend-email"
                                    type="email" placeholder="nom@exemple.com" [(ngModel)]="resendEmail"
                                    name="resendEmail" [disabled]="isResending()" (input)="validateEmail()" required />
                            </div>
                            <div class="text-danger fs-9 mt-1" *ngIf="emailError()">
                                <span class="fa-solid fa-exclamation-circle me-1"></span>{{ emailError() }}
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            <button class="btn btn-primary w-100" type="submit"
                                [disabled]="!resendEmail() || isResending() || emailError()">
                                <span *ngIf="!isResending()">
                                    <span class="fa-solid fa-paper-plane me-2"></span>Renvoyer le lien
                                </span>
                                <span *ngIf="isResending()">
                                    <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                                    Envoi en cours...
                                </span>
                            </button>
                            <button class="btn btn-outline-secondary w-100" type="button" (click)="goToLogin()">
                                <span class="fa-solid fa-arrow-left me-2"></span>Retour à la connexion
                            </button>
                        </div>
                    </form>
                </div>

                <!-- STATUS: ERROR -->
                <div *ngIf="status() === 'error'" class="text-center mb-6">
                    <div class="mb-4">
                        <span class="fa-solid fa-triangle-exclamation text-danger" style="font-size: 5rem;"></span>
                    </div>
                    <h4 class="text-body-highlight">Erreur d'activation</h4>
                    <p class="text-body-tertiary">{{ message() }}</p>

                    <div class="alert alert-danger d-flex align-items-center mb-4" role="alert">
                        <span class="fa-solid fa-exclamation-circle fs-5 me-3"></span>
                        <p class="mb-0 flex-1 text-start">
                            Une erreur s'est produite lors de l'activation. Veuillez réessayer ou contacter le support.
                        </p>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button class="btn btn-warning w-100" type="button" (click)="retry()">
                            <span class="fa-solid fa-rotate-right me-2"></span>Réessayer
                        </button>
                        <button class="btn btn-primary w-100" type="button" (click)="goToLogin()">
                            <span class="fa-solid fa-sign-in-alt me-2"></span>Aller sur la page de connexion
                        </button>
                        <button class="btn btn-outline-secondary w-100" type="button" (click)="goToHome()">
                            <span class="fa-solid fa-home me-2"></span>Retour à l'accueil
                        </button>
                    </div>
                </div>

                <!-- Footer -->
                <div class="text-center mt-4">
                    <p class="text-body-tertiary mb-2 fs-9">
                        Besoin d'aide ?
                        <a href="mailto:support@ysimmo.com" class="text-decoration-none fw-semibold">Contactez le
                            support</a>
                    </p>
                    <p class="text-body-quaternary fs-10 mb-0">
                        © {{ currentYear }} YS Immo. Tous droits réservés.
                    </p>
                </div>

            </div>
        </div>
    </div>
</main>